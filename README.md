# COSC 304 - Introduction to Databases - Winter 2020 Term 1

## Instructor
Dr. Ramon Lawrence, ASC 349, ramon.lawrence@ubc.ca, 250-807-9390<br>
**Office Hours:**	9:30 to 11:30 a.m. Friday or by appointment<br>
**Office Location:** ASC 349 (virtual office hours)

## TA
TBD

## Course Description
**Official Calendar:** Databases from a user's perspective: querying with SQL, designing with UML, and using programs to analyze data. Construction of database-driven applications and websites and experience with current database technologies.  Completion of COSC 121 is recommended.
**Prerequisite:** One of COSC 111, COSC 123, COSC 210. Third-year standing.

**Specific description:** This course provides an introduction to database systems including database querying, design, and programming. The course consists of three major components. The first component explains databases from a user perspective including how to query using SQL and relational algebra. The second component involves designing relational databases using Entity-Relationship (ER) diagrams and UML. The last part involves database and web programming with Java, JDBC, JSP, Python, and PHP. Students completing the course have experience with current database technologies, and the ability to use and develop databases and associated applications.

## Course Objectives
**Course Format:** Interactive online classes consisting of topic introduction, understanding evaluation using quick questions, and concept mastery with larger exercises.  Practical skills and applications of topics covered in assignments as well as practice using industrial database systems and software.

**Learning Outcomes:**
 - Understand the use case for databases and the relational model for data storage.
 - Proficiency in creating queries on relational databases using relational algebra and SQL.
 - Read existing database designs, design new databases using ER/UML modeling, and convert to the relational model.
 - Construct programs that access a database to read data, perform analysis, and output results.
 - Exposure to database technologies like NoSQL, JSON, XML, and cloud databases.

## Marking and Evaluation
| Item | Weighting | Description |
|------|-----------|-------------|
| Quizzes and Exercises | 10% | Online and during class time activities |
| Assignments | 25% | Weekly assignments |
| Midterm #1 | 15% | October 16th in class | 
| Midterm #2 | 15% | November 13th in class | 
| Final Exam | 35% | Cumulative, three hours | 

**A student must receive a combined grade of at least 50% on the exams (midterms and final) to pass the course.  Otherwise, the student receives a maximum overall grade of 45.**

## Textbook and Reference Material
 - All notes are online.
 - A textbook is not required. Students can get supplemental material from any database textbook.

## Expectations
 - Attend all classes and prepare before attending class. 
 - Read the notes before the class time. **Expect to spend about five hours per week in out-of-class preparation.**
 - Learn the material in the course by completing all assignments. **No late assignments are accepted.**
 - Enjoy attending class activities and participate according to your personality.  Ask questions by posting on chat or raising your hand.
 - Please actively participate in class discussions, questions, and problem solving exercises.
 - **I want all students to pass the course, receive a good grade, and feel the course was beneficial.**

## Schedule
**Lecture:** 2:30 to 4:00 p.m. Monday, 8:00 to 9:30 a.m. Friday<br>
**Lab:** Drop-in labs and help desk

|   Date     | Topic  | Reading |
|------------|------|-----------|
| September 11 (F) | First day of classes.  Introduction to course/databases | |
| September 14 (M) | Relational Model - Schemas, Keys, Constraints, Integrity | |
| September 18 (F) | Relational Algebra - Select, Project, Set Ops, Outer Joins, Practice Questions | |
| September 21 (M) | SQL DDL – Create table, constraints, create indexes, Insert/Delete/Update | |
| September 25 (F) | SQL - Simple Queries, LIKE operator, Set Operations, Order By | |
| September 28 (M) | SQL - Group By, Aggregate Functions | |
| October 2 (F) | SQL - Subqueries, Outer joins | |
| October 5 (M) |	Database Design – General Approach ; ER and UML Modeling | |
| October 9 (F) |	ER and UML Modeling examples and questions | |
| October 12 (M) | **No class due to Thanksgiving** | |
| October 16 (F) | **Midterm Exam #1 In-Class** | |
| October 19 (M) | EER Design - Specialization, Generalization, Aggregation<br>ER/EER Mapping to Relational model | |
| October 23 (F) | Database Programming using Java/JDBC | |
| October 26 (M) | Database Programming using Python and R | |
| October 30 (F) | Database Web Programming – Web servers, JSP/PHP | |
| November 2 (M) | Advanced SQL DDL – Triggers and Views | |
| November 6 (F) | Advanced SQL – Security, Transactions, Recursion | |
| November 9 (M) | **Midterm Exam #2 In-Class** | |
| November 13 (F) | **No class for Term 1 midterm break** | |
| November 16 (M) | XML, XPath, JSON, NoSQL Databases | |
| November 20 (F) | Normalization and Design Verification | |
| November 23 (M) | Database hosting and data cleansing/wrangling | |
| November 27 (F) | Project development | |
| November 30 (M) | Data warehousing and Data Mining<br>Preview of COSC 404 - Database System Implementation<br>Course Summary | |
| December 4 (F) | Final Exam Review | |

## Labs

|  Lab  |  Date  |  Topic  |
|----|------|-------|
|  | September 7 – 11 |	**No Lab during First Week of Class** |
| [1](labs/lab1) | September 14 – 18 | Lab 1: Querying using Relational Algebra |
| [2](labs/lab2) | September 21 – 25 | Lab 2: Creating tables using SQL and MySQL |
| [3](labs/lab3) | Sept. 28 – Oct. 2 | Lab 3: Writing SQL queries on a MySQL database |
| [4](labs/lab4) | October 5 – 9 | Lab 4: Database Design using UML Modeling |
| [5](labs/lab5) | October 12 – 23 |Lab 5: Converting UML Diagrams into the Relational Model |
| [6](labs/lab6) | October 26 – 30 | Lab 6: Programming with Java/Python using MySQL and SQL Server |
| [7](labs/lab7) | November 2 – 13 | Lab 7: Building a Database-enabled Web Site using JSP/PHP |
| [8](labs/lab8) | November 16 – 20 | Lab 8: Images, Security, and Transactions |
| [9](labs/lab9) | November 23 – 27 | Lab 9: XML, JSON, Views, and Triggers |
| [10](labs/lab10) | Nov. 30 – Dec. 4 | Lab 10: Project Completion |


## Learning Outcomes

After completing this course, students will be able to:

1. Explain the use case for databases and use relational databases and relational model terminology.
2. Write SQL DDL including CREATE and DROP TABLE, INSERT, UPDATE, and DELETE statements.
3. Perform SQL SELECT queries of moderate complexity including SELECT-FROM-WHERE, GROUP BY, ORDER BY, HAVING clauses and queries that contain subqueries, functions, and outer joins.
4. Write code in Python and R that queries a relational database.
5. Understand the components (entity, relationship, attribute) of an Entity-Relationship (ER) diagram in UML class diagram syntax in order to understand a database structure. Be able to convert an ER diagram into the relational model.
6. Fluency with XML and JSON representation formats and querying using XPath.


## Lecture Learning Objectives

1. Relational Database Introduction
      - define database, DBMS, schema, metadata
      - define program-data independence/data abstraction and explain how it is achieved by databases but not by file systems
      - Use relational model terminology: relation, attribute, tuple, domain, degree, cardinality
      - define and compare/contrast: DDL and DML
      - list the properties of relations
      - define superkey, key, candidate key, primary key, foreign key
      - define integrity, constraints, domain constraint, entity integrity constraint, referential integrity constraint
      - given a relation be able to: identify its cardinality, degree, domains, keys, and superkeys and determine if constraints are being violated
      - define: relational algebra, query language
  
2. SQL DDL: CREATE, INSERT, DELETE, UPDATE
      - recognize valid and invalid identifiers
      - explain the key types of constraints and how to enforce them: required (not null) data, domain constraints, entity integrity, referential integrity
      - write a CREATE TABLE statement given a high-level description
      - list what ALTER TABLE can and cannot do 
      - remove a table using DROP TABLE
      - create an index on fields of a table
      - explain how an index helps improve query time
      - write INSERT, DELETE, and UPDATE commands
      
3. SQL: select, project, join, ORDER BY
      * translate English questions into SQL queries that may require:<br>
            - SELECT-FROM-WHERE syntax for selection, projection, and join<br> 
            - renaming and aliasing including queries with multiple copies of the same relation <br>
            - ORDER BY <br>
            - LIMIT/OFFSET <br>
            - DISTINCT to eliminate duplicates <br>
            - UNION, EXCEPT, INTERSECT set operations <br>
            - IS NULL or IS NOT NULL <br>
            - LIKE string pattern matching <br>
      * read SQL queries to determine their output and English meaning

4. SQL: GROUP BY, aggregate functions, subqueries, outer joins
      - write SQL queries containing aggregate functions and calculated fields
      - write SQL queries requiring nested subqueries and the use of the appropriate operators such as comparison operators for single value subqueries, IN, NOT IN, ANY, ALL for table result subqueries, and EXISTS and NOT EXISTS for multiple result subqueries which may or may not contain results
      - lookup documentation on SQL functions supported by a particular database and use them as required in queries
      - explain the purpose of OUTER and NATURAL joins and use them for queries

5. Programming with Databases in R and Python
      - explain the common steps in querying a database using a programming language
      - draw and explain the database-program architecture and the key components
      - write a simple program to query a database in both Python and R
      - use a variety of databases including MySQL, Microsoft SQL Server, and SQLite
      - explain the purpose of ODBC
      - list the components of a database connection URL
      - use dplyr to query a database
      - be able to debug and resolve database connection and usage issues in Python and R code

6. ER/UML Diagrams with Relational Mapping
      - describe the three steps in database design including the results of each step
      - describe differences between conceptual, logical, and physical data models
      - define entity, relationship, and attribute
      - identify on an ER diagram: entity type, relationship type, degree of a relationship, recursive relationship, attribute, multi-valued attribute, derived attribute
      - identify on an ER diagram: primary key, partial primary key
      - identify on an ER diagram: cardinality and participation constraints
      - given an ER diagram, translate to the relational model with sufficient detail to be able to write queries using only an ER diagram in UML syntax

7. XML, JSON, and NoSQL
      - list some advantages of XML
      - given an XML document, determine if it is well-formed
      - given an XML document and a DTD or XML Schema, determine if it is valid
      - know the symbols (?, \*, +) for cardinality constraints in DTDs
      - compare and contrast ID/IDREFs in DTDs with keys and foreign keys in the relational model
      - list some advantages that XML Schema has over DTDs
      - explain why and when namespaces are used
      - given an XML document and query description, write an XPath query to retrieve the appropriate node sequence to answer the query
      - given an XML document and an XPath expression, list the result of evaluating the expression
      - understand the basic constructs used to encode JSON data
      - compare JSON representation versus relational model
      - understand alternative models for representing data besides the relational model
      - list some NoSQL databases and reason about their benefits and issues compared to the relational model for certain problems
      - explain at a high-level how MapReduce works      

8. Advanced SQL: Views, Security, Transactions
      - define views using CREATE VIEW from a high-level description
      - list advantages and disadvantages of views
      - use GRANT/REVOKE syntax
      - list the types of privileges and know when to use them
      - given a SQL command, explain what privileges are required for it to execute
      - explain how views are useful for security
      - define: transaction
      - list ACID properties
      - be aware of WITH RECURSIVE for recursive SQL queries
      
## Grievances and Complaints Procedures
A student who has a complaint related to this course should follow the procedures summarized below.
- The student should attempt to resolve the matter with the instructor first. Students may talk first to someone other than the
instructor if they do not feel, for whatever reason, that they can directly approach the instructor.
- If the complaint is not resolved to the student's satisfaction, the student should go to the departmental chair John Braun at
SCI 388, 807-8032.

## Your Responsibilities
Your responsibilities to this class and to your education as a whole include attendance and participation. You have a
responsibility to help create a classroom environment where all may learn. At the most basic level, this means you will
respect the other members of the class and the instructor and treat them with the courtesy you hope to receive in return.
Inappropriate classroom behavior may include: disruption of the classroom atmosphere, engaging in non-class activities,
talking on a cell-phone, inappropriate use of profanity in classroom discussion, use of abusive or disrespectful language
toward the instructor, a student in the class, or about other individuals or groups.

## Academic Integrity
The academic enterprise is founded on honesty, civility, and integrity. As members of this enterprise, all students are
expected to know, understand, and follow the codes of conduct regarding academic integrity. At the most basic level, this
means submitting only original work done by you and acknowledging all sources of information or ideas and attributing
them to others as required. This also means you should not cheat, copy, or mislead others about what is your work.
Violations of academic integrity (i.e., misconduct) lead to the breakdown of the academic enterprise, and therefore serious
consequences arise and harsh sanctions are imposed. For example, incidences of plagiarism or cheating usually result in a
failing grade or mark of zero on the assignment or in the course. Careful records are kept to monitor and prevent recidivism.
A more detailed description of academic integrity, including the policies and procedures, may be found at
http://www.calendar.ubc.ca/okanagan/index.cfm?tree=3,54,111,959. If you have any questions about how academic
integrity applies to this course, consult with the instructor.

## Disability Assistance
If you require disability-related accommodations to meet the course objectives, please contact the Diversity Advisor of
Disability Resources located in the University Centre, Room 227. For more information about Disability Resources or
academic accommodations, please visit the website at: https://students.ok.ubc.ca/drc/welcome.html

## Equity, Human Rights, Discrimination and Harassment
UBC Okanagan is a place where every student, staff and faculty member should be able to study and work in an
environment that is free from human rights based discrimination and harassment. If you require assistance related to an
issue of equity, discrimination or harassment, please contact the Equity Office, your administrative head of unit, and/or your
unit’s equity representative. UBC Okanagan Equity Advisor: ph. 250-807-9291; email equity.ubco@ubc.ca
Web: http://equity.ok.ubc.ca

## Missing an Exam
Only students who miss the final exam for a reason that corresponds to the University of British Columbia Okanagan's
policy on excused absences from examinations will be permitted to take the final exam at a later time. A make-up exam
may have a question format different from the regular exam. If the reason for
absence is satisfactory, the student’s final exam will be worth more of the final grade. Further information on Academic
Concession can be found under Policies and Regulation in the Okanagan Academic Calendar
http://www.calendar.ubc.ca/okanagan/index.cfm?tree=3,48,0,0


## Reference Material
* [SQL for Web Nerds](http://philip.greenspun.com/sql/index.html)
* [SQL Tutorial by Software Carpentry](http://swcarpentry.github.io/sql-novice-survey/) - uses SQLite and demonstrates using databases with Python/R
* [SQL in R with dplyr](https://datacarpentry.org/R-ecology-lesson/05-r-and-databases.html)
* [R DBI Package](https://www.rdocumentation.org/packages/DBI)
* [COSC 304](https://people.ok.ubc.ca/rlawrenc/teaching/304/index.html)
